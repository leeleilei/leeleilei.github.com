 Install Linux from USB Drive
Remember few months ago, I thought it is really difficult to install a linux from a USB, since it requires GRUB, kind of alternative CD media, and a "special" cd boot vmlinuz and initrd.gz files. Now, go to hell~ You give me any kind of media file, I can use it on a usb stick and install it right way. The "natty" was released yesterday, let's try it!

Portable Installation Media

1 Portable USB Stick Drive >= 1G, and a computer with capability of boot selection
2 Partition it
You can define more than partition it, here's just an demonstration
2.1 Plugin your USB drive
2.2 Find the right USB drive ID
#dmesg|grep sd

Probably you will got "sdb sdb1 sdb2",etc. It is yours USB drive ID.
2.3 Use fdisk
#fdisk /dev/sdb (run it as root or sudo fdisk /dev/sdb)
press "n" to create a new partition
press "p" to create the primary partition
press "1" to create the number 1 primary partion
press "p" to view the current table, then you shall get the sdb1 now
press "a", then "1" to toggle the sdb1 as bootable
press "t", then "c" to change the system id as "windows 95"
press "w", save all of the partition information to the USB drive

3 Make the file system
Using the ISO file to install the Linux, you shall use a "FAT32" partition to save the ISO file, otherwise the ISO couldn't be seeked by the GRUB loader
#mkfs -t vfat /dev/sdb1 (replace sdb1 with your real media partition, do NOT be wrong)

4 Downlaod the ubuntu 11.04 iso from ubuntu.com/download
5 Copy the ISO file to the sdb1 partition
# mount /dev/sdb1 /mnt
# cp ubuntu-11.04-desktop-i386.iso /mnt

or you can copy it from windows system, since the fat32 partition is working under windows.
6. Install the GRUB (grub2 here, same as grub1)
GRUB is the bootloader, which will control how you start the OS, by ISO or by normal media
6.1 Mount the sdb1 partition
#mount /dev/sdb1 /mnt
#grub-install --root-directory=/mnt /dev/sdb (replace sdb with your real USB drive id)

Now you got a bootable USB stick bearing the ubuntu installation media.
7 Begin Installation
7.1 Plugin your USB dirve and boot your system
7.2 Press "F12" and select boot from USB/Flash drive
7.3 then you will get a "grub>" prompt and stopped, that's what we wanna
7.4 Configure the boot parameter
grub> ls
you will get a list of partitions including your local hard disk partition and your USB partition. That's easily identified by the count of partition number, like (hd0,1)(hd1,1)(hd1,2),(hd1,3),etc. we only have 1 partition on USB, so (hd0,1) is the USB partition
grub> set root='(hd0,1)'
grub> loopback loop /ubuntu-11.04-desktop-i386.iso
grub> linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/ubuntu-11.04-desktop-i386.iso
grub> initrd (loop)/casper/initrd.lz
tip: the loopback command will assign the "loop" as the media file (iso), then when setting the kernel/linux and initrd files, you can use the "TAB" key to let the grub to "seek" the possible files, e.g. initrd file here is the initrd.lz not initrd.gz, you can use "TAB" after you typing the "initrd.". The GRUB will automatically seek the initrd.lz
grub> boot

Done!
Summary
1. GRUB
2. FAT32 file system bearing the ISO file
3. loopback syntax in the GRUB
4. Of course, You can using your existing grub.cfg to add the installation menuentry.
5. Do NOT try to install a new system on the same USB drive where your iso is. Sorry, you couldn't. The ubiquity tool will try to umount everything, but your iso partition is always mounted, so it is not going to happen.
More Examples

cat <<EOF> /mnt/boot/grub/grub.cfg
menuentry "Ubuntu Live 9.10 32bit" {
loopback loop /boot/iso/ubuntu-9.10-desktop-i386.iso
linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-i386.iso noeject noprompt --
initrd (loop)/casper/initrd.lz
}

menuentry "Ubuntu Live 9.10 64bit" {
loopback loop /boot/iso/ubuntu-9.10-desktop-amd64.iso
linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-amd64.iso noeject noprompt --
initrd (loop)/casper/initrd.lz
}

menuentry "Grml small 2009.10" {
loopback loop /boot/iso/grml-small_2009.10.iso
linux (loop)/boot/grmlsmall/linux26 findiso=/boot/iso/grml-small_2009.10.iso apm=power-off lang=us vga=791 boot=live nomce noeject noprompt --
initrd (loop)/boot/grmlsmall/initrd.gz
}

menuentry "tinycore" {
loopback loop /boot/iso/tinycore_2.3.1.iso
linux (loop)/boot/bzImage --
initrd (loop)/boot/tinycore.gz
}

menuentry "Netinstall 32 preseed" {
loopback loop /boot/iso/mini.iso
linux (loop)/linux auto url=http://www.panticz.de/pxe/preseed/preseed.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
initrd (loop)/initrd.gz
}

menuentry "debian-installer-amd64.iso" {
loopback loop /boot/iso/debian-installer-amd64.iso
linux (loop)/linux vga=normal --
initrd (loop)/initrd.gz
}

menuentry "BackTrack 4" {
linux /boot/bt4/boot/vmlinuz BOOT=casper boot=casper nopersistent rw vga=0x317 --
initrd /boot/bt4/boot/initrd.gz
}

menuentry "Memory test (memtest86+)" {
linux16 /boot/img/memtest86+.bin
}

menuentry "BackTrack ERR" {
loopback loop /boot/iso/bt4-pre-final.iso
linux (loop)/boot/vmlinuz find_iso/filename=/boot/iso/bt4-pre-final.iso BOOT=casper boot=casper nopersistent rw vga=0x317--
initrd (loop)/boot/initrd.gz
}

menuentry "XBMC ERR" {
loopback loop /boot/iso/XBMCLive.iso
linux (loop)/vmlinuz boot=cd isofrom=/dev/sda1/boot/iso/XBMCLive.iso xbmc=nvidia,nodiskmount,tempfs,setvolume loglevel=0 --
initrd (loop)/initrd0.img
}

menuentry "netboot.me" {
loopback loop /boot/iso/netbootme.iso
linux16 (loop)/GPXE.KRN
}

menuentry "debian installer amd64 netboot XEN pressed" {
linux /boot/debian/linux auto preseed/url=http://www.panticz.de/pxe/preseed/xen.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
initrd /boot/debian/initrd.gz
}
EOF
