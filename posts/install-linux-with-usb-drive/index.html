<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Install Linux With Pen Drive :: Zen of Bitcoin — Understanding the Bitcoin</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Note: I would recommend you use the unetbootin to make the Linux bootable USB drive, since it is more easier (GUI) and convinience (auto-download distribution CD, auto-make boot flags). The below process just reach the same target, helping you understand what happened during the unetbootin process.
In the very beginning, I thought it was really difficult to install a linux from a USB, since it requires GRUB, kinds of alternative CD media, and a &amp;ldquo;special&amp;rdquo; cd boot vmlinuz and initrd."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://btcz.im/posts/install-linux-with-usb-drive/" />


<link rel="stylesheet" href="https://btcz.im/assets/style.css">

  <link rel="stylesheet" href="https://btcz.im/assets/green.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://btcz.im/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://btcz.im/img/favicon/green.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Install Linux With Pen Drive :: Zen of Bitcoin — Understanding the Bitcoin" />
<meta name="twitter:description" content="Note: I would recommend you use the unetbootin to make the Linux bootable USB drive, since it is more easier (GUI) and convinience (auto-download distribution CD, auto-make boot flags). The below process just reach the same target, helping you understand what happened during the unetbootin process.
In the very beginning, I thought it was really difficult to install a linux from a USB, since it requires GRUB, kinds of alternative CD media, and a &amp;ldquo;special&amp;rdquo; cd boot vmlinuz and initrd." />
<meta name="twitter:site" content="https://btcz.im" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Install Linux With Pen Drive :: Zen of Bitcoin — Understanding the Bitcoin">
<meta property="og:description" content="Note: I would recommend you use the unetbootin to make the Linux bootable USB drive, since it is more easier (GUI) and convinience (auto-download distribution CD, auto-make boot flags). The below process just reach the same target, helping you understand what happened during the unetbootin process.
In the very beginning, I thought it was really difficult to install a linux from a USB, since it requires GRUB, kinds of alternative CD media, and a &amp;ldquo;special&amp;rdquo; cd boot vmlinuz and initrd." />
<meta property="og:url" content="https://btcz.im/posts/install-linux-with-usb-drive/" />
<meta property="og:site_name" content="Install Linux With Pen Drive" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2013-04-02 08:10:52 -0400 -0400" />











</head>
<body class="">


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Zen of Bitcoin
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/tags/index.html">Tags</a></li>
        
      
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/tags/index.html">Tags</a></li>
      
    
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://btcz.im/posts/install-linux-with-usb-drive/">Install Linux With Pen Drive</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2013-04-02
    </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://btcz.im/tags/linux/">linux</a>&nbsp;
    
    #<a href="https://btcz.im/tags/boot/">boot</a>&nbsp;
    
    #<a href="https://btcz.im/tags/grub/">grub</a>&nbsp;
    
    #<a href="https://btcz.im/tags/fdisk/">fdisk</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    

<p><strong>Note: I would recommend you use the <a href="http://unetbootin.sourceforge.net">unetbootin</a> to make the Linux bootable USB drive, since it is more easier (GUI) and convinience (auto-download distribution CD, auto-make boot flags). The below process just reach the same target, helping you understand what happened during the <code>unetbootin</code> process.</strong></p>

<hr />

<p>In the very beginning, I thought it was really difficult to install a
linux from a USB, since it requires GRUB, kinds of alternative CD
media, and a &ldquo;special&rdquo; cd boot vmlinuz and initrd.gz files. Finally I
realise the power of GRUB, and it could boot anything, event a ISO
file.</p>

<h1 id="the-media">The Media</h1>

<p>You need a portable USB drive or pen drive, whose capacity is larger
than 1GB, and a computer with capability of boot sequence selection</p>

<p>Download the Linux distribution CD image.</p>

<h1 id="partition-it">Partition it</h1>

<ol>
<li><p>Identify the USB device</p>

<pre><code># dmesg | grep /dev/
</code></pre></li>

<li><p>Use <code>fdisk</code> to format the partition</p>

<pre><code># fdisk /dev/sdb (run it as root or sudo fdisk /dev/sdb)
press &quot;n&quot; to create a new partition
press &quot;p&quot; to create the primary partition
press &quot;1&quot; to create the number 1 primary partion
press &quot;p&quot; to view the current table, then you shall get the sdb1 now
press &quot;a&quot;, then &quot;1&quot; to toggle the sdb1 as bootable
press &quot;t&quot;, then &quot;c&quot; to change the system id as &quot;windows 95&quot;
press &quot;w&quot;, save all of the partition information to the USB drive
</code></pre></li>
</ol>

<h1 id="prepare-the-file-system">Prepare the file system</h1>

<p>Using the ISO file to install the Linux, you shall use a &ldquo;FAT32&rdquo; partition to
save the ISO file, otherwise the ISO couldn&rsquo;t be seeked by the GRUB loader</p>

<pre><code>    # mkfs -t vfat /dev/sdb1 (replace sdb1 with your real media partition, do NOT be wrong)
    # mount /dev/sdb1 /mnt
    # cp ubuntu-11.04-desktop-i386.iso /mnt
</code></pre>

<p>or you can copy it from windows system, since the fat32 partition is working
under windows.</p>

<h1 id="install-the-grub">Install the GRUB</h1>

<p>GRUB is the bootloader, which will control how you start the OS, by ISO or by normal media</p>

<pre><code>    # mount /dev/sdb1 /mnt
    # grub-install --root-directory=/mnt /dev/sdb (replace sdb with your real USB drive id)
</code></pre>

<p>Now you got a bootable USB stick bearing the ubuntu installation media.</p>

<h1 id="begin-linux-boot">Begin Linux Boot</h1>

<ol>
<li>Plugin your USB dirve and boot your system</li>
<li>Press &ldquo;F12&rdquo; and select boot from USB/Flash drive</li>
<li>then you will get a &ldquo;grub&gt;&rdquo; prompt and stopped, that&rsquo;s what we wanna</li>

<li><p>Configure the boot parameter</p>

<pre><code>grub&gt; ls
</code></pre>

<p>you will get a list of partitions including your local hard disk partition and
your USB partition. That&rsquo;s easily identified by the count of partition number,
like (hd0,1)(hd1,1)(hd1,2),(hd1,3),etc. we only have 1 partition on USB, so
(hd0,1) is the USB partition</p>

<pre><code>grub&gt; set root='(hd0,1)'
grub&gt; loopback loop /ubuntu-11.04-desktop-i386.iso
grub&gt; linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/ubuntu-11.04-desktop-i386.iso
grub&gt; initrd (loop)/casper/initrd.lz
grub&gt; boot
</code></pre></li>
</ol>

<h1 id="install-the-linux">Install the Linux</h1>

<p>After you boot into the <code>live CD desktop</code>, you can use the <code>install to harddisk</code> function to install the Linux copy to your local HDD or another USB drive.</p>

<h1 id="notes">Notes</h1>

<ol>
<li><p><code>loop</code> device</p>

<p>The loopback command will assign the &ldquo;loop&rdquo; as themedia file (iso)</p>

<p>Use the &ldquo;TAB&rdquo; key to let the <code>GRUB</code> to &ldquo;seek&rdquo; the possible files</p>

<p>E.g. initrd file here is the <code>initrd.lz</code> not <code>initrd.gz</code>, you can
use <code>TAB</code> after you typing the <code>initrd.</code>. The GRUB will
automatically seek the initrd.lz**</p></li>

<li><p>GRUB is so powerful to read ISO or file system right before system
&ldquo;booted&rdquo;</p></li>

<li><p>Use <code>FAT32</code> file system bearing the ISO file</p></li>

<li><p>You can using your existing <code>grub.cfg</code> (live system) to add the
installation menuentry.</p></li>

<li><p>Do NOT try to install a new system on the same USB drive where your
iso is</p></li>

<li><p>More examples of boot entry</p>

<pre><code>cat &lt;&lt;EOF&gt; /mnt/boot/grub/grub.cfg
menuentry &quot;Ubuntu Live 9.10 32bit&quot; {
loopback loop /boot/iso/ubuntu-9.10-desktop-i386.iso
linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-i386.iso noeject noprompt --
initrd (loop)/casper/initrd.lz
}

menuentry &quot;Ubuntu Live 9.10 64bit&quot; {
loopback loop /boot/iso/ubuntu-9.10-desktop-amd64.iso
linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=/boot/iso/ubuntu-9.10-desktop-amd64.iso noeject noprompt --
initrd (loop)/casper/initrd.lz
}

menuentry &quot;Grml small 2009.10&quot; {
loopback loop /boot/iso/grml-small_2009.10.iso
linux (loop)/boot/grmlsmall/linux26 findiso=/boot/iso/grml-small_2009.10.iso apm=power-off lang=us vga=791 boot=live nomce noeject noprompt --
initrd (loop)/boot/grmlsmall/initrd.gz
}

menuentry &quot;tinycore&quot; {
loopback loop /boot/iso/tinycore_2.3.1.iso
linux (loop)/boot/bzImage --
initrd (loop)/boot/tinycore.gz
}

menuentry &quot;Netinstall 32 preseed&quot; {
loopback loop /boot/iso/mini.iso
linux (loop)/linux auto url=http://www.panticz.de/pxe/preseed/preseed.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
initrd (loop)/initrd.gz
}

menuentry &quot;debian-installer-amd64.iso&quot; {
loopback loop /boot/iso/debian-installer-amd64.iso
linux (loop)/linux vga=normal --
initrd (loop)/initrd.gz
}

menuentry &quot;BackTrack 4&quot; {
linux /boot/bt4/boot/vmlinuz BOOT=casper boot=casper nopersistent rw vga=0x317 --
initrd /boot/bt4/boot/initrd.gz
}

menuentry &quot;Memory test (memtest86+)&quot; {
linux16 /boot/img/memtest86+.bin
}

menuentry &quot;BackTrack ERR&quot; {
loopback loop /boot/iso/bt4-pre-final.iso
linux (loop)/boot/vmlinuz find_iso/filename=/boot/iso/bt4-pre-final.iso BOOT=casper boot=casper nopersistent rw vga=0x317--
initrd (loop)/boot/initrd.gz
}

menuentry &quot;XBMC ERR&quot; {
loopback loop /boot/iso/XBMCLive.iso
linux (loop)/vmlinuz boot=cd isofrom=/dev/sda1/boot/iso/XBMCLive.iso xbmc=nvidia,nodiskmount,tempfs,setvolume loglevel=0 --
initrd (loop)/initrd0.img
}

menuentry &quot;netboot.me&quot; {
loopback loop /boot/iso/netbootme.iso
linux16 (loop)/GPXE.KRN
}

menuentry &quot;debian installer amd64 netboot XEN pressed&quot; {
linux /boot/debian/linux auto preseed/url=http://www.panticz.de/pxe/preseed/xen.seed locale=en_US console-setup/layoutcode=de netcfg/choose_interface=eth0 debconf/priority=critical --
initrd /boot/debian/initrd.gz
}
EOF
</code></pre></li>
</ol>

<hr />

<p>Last Updated: Sep 06, 2013 23:10 Manil</p>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://btcz.im/posts/use-free-and-open-source-software-to-organise-your-life-efficiently/">
          <span class="button__icon">←</span>
          <span class="button__text">Use FREE and Open-Source Software to Organise Your Life Efficiently</span>
        </a>
      </span>
      
      
    </div>
  </div>
  

  
<script src="https://utteranc.es/client.js"
        repo="leeleilei/leeleilei.github.com"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="https://btcz.im/assets/main.js"></script>
<script src="https://btcz.im/assets/prism.js"></script>





  
</div>

</body>
</html>
