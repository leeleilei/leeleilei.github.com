<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>IELTS Speaking Test Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<link rel="stylesheet" href="https://btcz.im/assets/ieltspeakitstyle.css">
  </head>
  <body>
	  <h1>IELTS Speaking Test Assistant - Part 1</h1> 
	  <div id="accordion"></div>

	<div>
		<main>
				<p>Thanks to <a href="https://github.com/ai/audio-recorder-polyfill">Audio Recorder Polyfill</a></p>
				<p>Contribute code and questions at <a href="https://github.com/leeleilei/leeleilei.github.com">my github</a>.</p>
				<p>Tip: Enable the micro permssion if you are using Chrome on Android phone</p>
				<div id="controls"><button id="record" disabled="" autocomplete="off" title="Record"><svg viewBox="0 0 100 100">
							<circle cx="50" cy="50" r="46"></circle>
						</svg></button><button id="sec" disabled="" autocomplete="off" title="Record by 1 second"><svg
							viewBox="0 0 100 100">
							<circle cx="50" cy="50" r="46"></circle><text x="26" y="64" font-size="45">1s</text>
						</svg></button><button id="pause" disabled="" autocomplete="off" title="Pause"><svg
							viewBox="0 0 100 100">
							<rect x="14" y="10" width="25" height="80"></rect>
							<rect x="62" y="10" width="25" height="80"></rect>
						</svg></button><button id="resume" disabled="" autocomplete="off" title="Resume"><svg
							viewBox="0 0 100 100">
							<polygon points="10,10 90,50 10,90"></polygon>
						</svg></button><button id="stop" autocomplete="off" disabled="" title="Stop"><svg viewBox="0 0 100 100">
							<rect x="12" y="12" width="76" height="76"></rect>
						</svg></button><button id="request" autocomplete="off" disabled="" title="Request data"><svg
							viewBox="0 0 100 100">
							<polygon points="10,10 90,10 50,90"></polygon>
						</svg></button></div>
				<div id="mode">Native support, <a href="?polyfill">force polyfill</a></div>
				<div id="formats"></div>
				<div id="support">Your browser doesnâ€™t support MediaRecorder
					or WebRTC to be able to polyfill MediaRecorder.</div>
				<ul id="list"></ul>
			</main>

	<script>(function () { var a, i, b, c, d, f, g, h, l = ["start", "stop", "pause", "resume"], m = ["audio/webm", "audio/ogg", "audio/wav"], j = 1024, k = 1 << 20; function n(e) { var r, $ = Math.abs(e); return $ >= k ? (r = "MB", e /= k) : $ >= j ? (r = "KB", e /= j) : r = "B", e.toFixed(0).replace(/(?:\.0*|(\.[^0]+)0+)$/, "$1") + " " + r } function e(e) { i.innerHTML = "", navigator.mediaDevices.getUserMedia({ audio: !0 }).then(function (r) { a = new MediaRecorder(r), l.forEach(function (e) { a.addEventListener(e, t.bind(null, e)) }), a.addEventListener("dataavailable", s), "full" === e ? a.start() : a.start(1e3) }), c.blur(), b.blur() } function o() { a.stop(), a.stream.getTracks()[0].stop(), g.blur() } function p() { a.pause(), d.blur() } function q() { a.resume(), f.blur() } function r() { a.requestData(), h.blur() } function s(e) { var r = document.createElement("li"), $ = document.createElement("strong"); $.innerText = "dataavailable: ", r.appendChild($); var a = document.createElement("span"); a.innerText = e.data.type + ", " + n(e.data.size), r.appendChild(a); var o = document.createElement("audio"); o.controls = !0, o.src = URL.createObjectURL(e.data), r.appendChild(o), i.appendChild(r) } function t(e) { var r = document.createElement("li"); r.innerHTML = "<strong>" + e + ": </strong>" + a.state, "start" === e && (r.innerHTML += ", " + a.mimeType), i.appendChild(r), "recording" === a.state ? (c.disabled = !0, b.disabled = !0, h.disabled = !1, f.disabled = !0, d.disabled = !1, g.disabled = !1) : "paused" === a.state ? (c.disabled = !0, b.disabled = !0, h.disabled = !1, f.disabled = !1, d.disabled = !0, g.disabled = !1) : "inactive" === a.state && (c.disabled = !1, b.disabled = !1, h.disabled = !0, f.disabled = !0, d.disabled = !0, g.disabled = !0) } i = document.getElementById("list"), c = document.getElementById("sec"), b = document.getElementById("record"), h = document.getElementById("request"), f = document.getElementById("resume"), d = document.getElementById("pause"), g = document.getElementById("stop"), MediaRecorder.notSupported ? (i.style.display = "none", document.getElementById("controls").style.display = "none", document.getElementById("formats").style.display = "none", document.getElementById("mode").style.display = "none", document.getElementById("support").style.display = "block") : (document.getElementById("formats").innerText = "Format: " + m.filter(function (e) { return MediaRecorder.isTypeSupported(e) }).join(", "), c.addEventListener("click", e.bind(null, "parts")), b.addEventListener("click", e.bind(null, "full")), h.addEventListener("click", r), f.addEventListener("click", q), d.addEventListener("click", p), g.addEventListener("click", o), c.disabled = !1, b.disabled = !1); })();</script>	
	<script>window.MediaRecorder && !/^\?polyfill/.test(location.search) || document.write(decodeURI('%3Cscript src="./polyfill.js">%3C/script>'));</script>
	<!-- inserting these scripts at the end to be able to use all the elements in the DOM -->
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script>
		var url = "https://btcz.im/assets/ieltspeakitq/p1.txt";
		$.ajax(url).done(function(data) {
			var myQs = data.split("--\n");
			x = Math.floor(Math.random() * Math.floor(myQs.length));
			myQ = myQs[x].split("\n");
			
			myQ.forEach(myFunc);

			function myFunc(item, index){
				n = index + 1;
				document.getElementById("accordion").innerHTML +=  "<h3>Question " + n + "</h3><div><p>" + item + "</p></div>"
			}
			$( function() {
  				$("#accordion").accordion();
		});
		
		});


		$("#log").hide();
	</script>

<script src="https://utteranc.es/client.js"
repo="leeleilei/leeleilei.github.com"
issue-term="pathname"
theme="github-light"
crossorigin="anonymous"
async>
</script>
</body>
</html>